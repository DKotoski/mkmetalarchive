(this.webpackJsonpmkmetalarchive=this.webpackJsonpmkmetalarchive||[]).push([[0],{105:function(e,n,a){e.exports=a(137)},110:function(e,n,a){},111:function(e,n,a){},137:function(e,n,a){"use strict";a.r(n);var t=a(0),r=a.n(t),l=a(25),c=a.n(l),u=(a(110),a(111),a(140)),o=a(170),i=a(44),s=a(8),m=a.n(s),p=a(13),d=a(22),f=a(35),y=a.n(f),b=function(e){return"/mkmetalarchive/data/"+e},g=function(){var e=Object(p.a)(m.a.mark((function e(){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(b("data.json")),e.next=3,y.a.get(b("data.json"));case 3:return n=e.sent.data,e.abrupt("return",x(n));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(p.a)(m.a.mark((function e(n){var a,t,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.get(b("data.json"));case 2:return a=e.sent.data,t=a.find((function(e){return e.id==n})),e.next=6,y.a.get(b(t.linkToData));case 6:return r=e.sent.data,e.abrupt("return",Promise.resolve(r));case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),E=function(){var e=Object(p.a)(m.a.mark((function e(n){var a,t,r,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.get(b("data.json"));case 2:return a=e.sent.data,t=a.find((function(e){return e.id==n})),e.next=6,y.a.get(b(t.linkToData));case 6:return r=e.sent.data,e.next=9,x(r.albums);case 9:return l=e.sent,e.abrupt("return",Promise.resolve(l));case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),v=function(){var e=Object(p.a)(m.a.mark((function e(n,a){var t,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(n);case 2:return t=e.sent,r=t.find((function(e){return e.id==a})),e.abrupt("return",Promise.resolve(r));case 5:case"end":return e.stop()}}),e)})));return function(n,a){return e.apply(this,arguments)}}(),x=function(){var e=Object(p.a)(m.a.mark((function e(n){var a,t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],t=[],n.forEach((function(e){a.push(y.a.get(b(e.linkToData)).then((function(e){t.push(e.data)})))})),e.next=5,Promise.all(a);case 5:return e.abrupt("return",Promise.resolve(t));case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),P=Object(d.b)({name:"band-store",initialState:{allBands:[],displayBands:[]},reducers:{setAllBands:function(e,n){e.allBands=n.payload},setDisplayBands:function(e,n){e.displayBands=n.payload}}}),w=P.actions,j=(w.setAllBands,w.setDisplayBands),k=a(20),O=a(153),I=a(154),N=a(155),A=a(156),B=a(157),S=a(158),C=function(e){return r.a.createElement(O.a,null,r.a.createElement(I.a,{size:"small"},e.headers.length?r.a.createElement(N.a,null,r.a.createElement(A.a,null,e.headers.map((function(e){return r.a.createElement(B.a,{key:e.title},e.title)})))):null,r.a.createElement(S.a,null,e.data.map((function(n,a){return e.rowRenderer(n)})))))},T=a(162),D=a(163),F=a(9),H=a(27),L="/",M="/band/:bandName",R="/band/:bandName/album/:albumName",J=a(159),W=a(160),q=a(161),z=function(e){return r.a.createElement(J.a,{style:{margin:"10px",padding:"10px"}},e.logo?r.a.createElement(W.a,{style:{height:"200px"},image:e.logo}):null,r.a.createElement(q.a,null,e.bandName))},G=Object(k.c)((function(e){return{gridData:e.bandList.displayBands}}),(function(e){return{getAllBands:function(){e(function(){var e=Object(p.a)(m.a.mark((function e(n,a){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:t=e.sent,n(j(t)),console.log(t);case 5:case"end":return e.stop()}}),e)})));return function(n,a){return e.apply(this,arguments)}}())}}}))((function(e){return r.a.useEffect((function(){e.getAllBands()}),[]),r.a.createElement(T.a,{container:!0},e.gridData.map((function(e){var n=Object(F.d)(M,{bandName:e.id});return r.a.createElement(T.a,{key:e.id,item:!0,md:3,xs:6},r.a.createElement(D.a,{component:H.b,to:n},r.a.createElement(z,{bandName:e.name,logo:e.logo})))})))})),K=Object(d.b)({name:"album-page-store",initialState:{},reducers:{setAlbum:function(e,n){e.album=n.payload}}}),U=K.actions.setAlbum,$=a(56),Q=Object(d.b)({name:"player-store",initialState:{playlist:[],isPlaying:!1,currentPlayingIndex:0},reducers:{setPlaylist:function(e,n){e.playlist=n.payload},setIsPlaying:function(e,n){e.isPlaying=n.payload},setCurrentPlayingIndex:function(e,n){e.currentPlayingIndex=n.payload}}}),V=Q.actions,X=V.setPlaylist,Y=V.setIsPlaying,Z=V.setCurrentPlayingIndex,_=function(e,n){return function(){var a=Object(p.a)(m.a.mark((function a(t,r){var l,c;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:l=e.indexOf(n),c=e.slice(l),t(X(c)),t(Z(0));case 4:case"end":return a.stop()}}),a)})));return function(e,n){return a.apply(this,arguments)}}()},ee=a(141),ne=a(164),ae=a(172),te=a(38),re=a.n(te),le=a(43),ce=a.n(le),ue=function(e){var n=Object(F.d)(R,{bandName:e.bandId,albumName:e.albumId});return r.a.createElement(J.a,null,r.a.createElement(ne.a,{component:H.b,to:n,avatar:e.cover?r.a.createElement(ae.a,{variant:"square",style:{height:"120px",width:"120px"},src:e.cover}):null,title:e.name,titleTypographyProps:{variant:"h4"},subheader:e.year,subheaderTypographyProps:{variant:"h5"},action:r.a.createElement(ee.a,{onClick:function(){e.onAlbumPlay(e.songs)}},r.a.createElement(ce.a,null))}),r.a.createElement(q.a,null,r.a.createElement(C,{headers:[{title:"TITLE"},{title:"LENGTH"},{title:""}],rowRenderer:function(n){return r.a.createElement(A.a,{key:n.id},r.a.createElement(B.a,null,n.name),r.a.createElement(B.a,null,re.a.utc(1e3*n.lenght).format("mm:ss")),r.a.createElement(B.a,null,r.a.createElement(ee.a,{onClick:function(){e.onSongPlay(e.songs,n)}},r.a.createElement(ce.a,null))))},data:e.songs})))},oe=Object(k.c)((function(e){return{album:e.albumPage.album}}),(function(e){return{init:function(n,a){e(function(e,n){return function(){var a=Object(p.a)(m.a.mark((function a(t,r){var l;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,v(e,n);case 2:l=a.sent,console.log(l),t(U(l));case 5:case"end":return a.stop()}}),a)})));return function(e,n){return a.apply(this,arguments)}}()}(n,a))},onSongPlay:function(n,a){e(_(n,a))},onAlbumPlay:function(n){e(_(n,n[0]))}}}))((function(e){return r.a.useEffect((function(){e.init(e.match.params.bandName,e.match.params.albumName)}),[]),r.a.createElement(r.a.Fragment,null,e.album?r.a.createElement(r.a.Fragment,null,r.a.createElement(ue,{bandId:e.match.params.bandName,albumId:e.match.params.albumName,name:e.album.name,year:e.album.year,length:e.album.length,cover:e.album.cover,songs:e.album.songs,onAlbumPlay:e.onAlbumPlay,onSongPlay:e.onSongPlay})):null)})),ie=Object(d.b)({name:"band-page-store",initialState:{albums:[]},reducers:{setBand:function(e,n){e.band=n.payload},setAlbums:function(e,n){e.albums=n.payload}}}),se=ie.actions,me=se.setBand,pe=se.setAlbums,de=Object(k.c)((function(e){return{band:e.bandPage.band,albums:e.bandPage.albums}}),(function(e){return{init:function(n){e(function(e){return function(){var n=Object(p.a)(m.a.mark((function n(a,t){var r,l;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h(e);case 2:return r=n.sent,n.next=5,x(r.albums);case 5:l=n.sent,a(me(r)),a(pe(l));case 8:case"end":return n.stop()}}),n)})));return function(e,a){return n.apply(this,arguments)}}()}(n))},onSongPlay:function(n,a){e(_(n,a))},onAlbumPlay:function(n){e(_(n,n[0]))}}}))((function(e){return r.a.useEffect((function(){e.init(e.match.params.bandName)}),[]),r.a.createElement(r.a.Fragment,null,e.band?r.a.createElement(r.a.Fragment,null,r.a.createElement(o.a,{alignContent:"center"},r.a.createElement(ae.a,{src:e.band.logo,style:{width:"400px",height:"400px",margin:"0 auto 0"}}),r.a.createElement(i.a,{variant:"h3",align:"center"},e.band.name)),r.a.createElement(T.a,{container:!0},e.albums.map((function(n){return r.a.createElement(T.a,{item:!0,xs:12,key:n.id},r.a.createElement(ue,{bandId:e.match.params.bandName,albumId:n.id,name:n.name,year:n.year,length:n.length,cover:n.cover,songs:n.songs,onAlbumPlay:e.onAlbumPlay,onSongPlay:e.onSongPlay}))})))):null)})),fe=a(165),ye=a(171),be=a(166),ge=a(167),he=a(97),Ee=(a(136),a(95)),ve=a.n(Ee),xe=Object(k.c)((function(e){var n=function(){if(0!=e.player.playlist.length)return 1==e.player.playlist.length?e.player.playlist[0]:e.player.playlist[e.player.currentPlayingIndex]},a=n();return console.log("CurentPlay: ",a),{currentPlay:n(),playlist:e.player.playlist,isPlaying:e.player.isPlaying,playingIndex:e.player.currentPlayingIndex}}),(function(e){return{setIsPlaying:function(n){e(Y(n))},onNext:function(){e(function(){var e=Object(p.a)(m.a.mark((function e(n,a){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a().player.currentPlayingIndex+1,a().player.playlist.length>t&&(console.log(t),n(Z(t)));case 2:case"end":return e.stop()}}),e)})));return function(n,a){return e.apply(this,arguments)}}())},onPrevious:function(){e(function(){var e=Object(p.a)(m.a.mark((function e(n,a){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=a().player.currentPlayingIndex-1)>=0&&n(Z(t));case 2:case"end":return e.stop()}}),e)})));return function(n,a){return e.apply(this,arguments)}}())},onSongPlaylistPlay:function(n){e(function(e){return function(){var n=Object(p.a)(m.a.mark((function n(a,t){var r;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=t().player.playlist.indexOf(e),a(Z(r));case 2:case"end":return n.stop()}}),n)})));return function(e,a){return n.apply(this,arguments)}}()}(n))}}}))((function(e){return r.a.createElement(r.a.Fragment,null,0!=e.playlist.length?r.a.createElement(u.a,{style:{position:"fixed",bottom:0,left:0,width:"100%",maxHeight:"100%",borderTop:"1px black"}},r.a.createElement(i.a,null,e.currentPlay?e.currentPlay.name:""),r.a.createElement(ye.a,null,r.a.createElement(be.a,{expandIcon:e.playlist.length<=1?null:r.a.createElement(ve.a,null),"aria-controls":"panel1bh-content",id:"panel1bh-header"},r.a.createElement(he.a,{autoPlay:!0,src:e.currentPlay?e.currentPlay.playUrl:"",showSkipControls:e.playlist.length>1,onClickNext:e.onNext,onClickPrevious:e.onPrevious,onEnded:e.onNext,onPlay:function(e){return console.log("onPlay")}})),r.a.createElement(ge.a,{style:{maxHeight:"400px"}},r.a.createElement(o.a,{style:{overflow:"auto",width:"100%",maxHeight:"inherit"}},r.a.createElement(C,{data:e.playlist,headers:[],rowRenderer:function(n){return r.a.createElement(A.a,{selected:e.playlist.indexOf(n)==e.playingIndex},r.a.createElement(B.a,null,n.name),r.a.createElement(B.a,null,re.a.utc(1e3*n.lenght).format("mm:ss")),r.a.createElement(B.a,null,r.a.createElement(fe.a,{onClick:function(){e.onSongPlaylistPlay(n)}},r.a.createElement(ce.a,null))))}}))))):null)}));var Pe=function(){return r.a.createElement(H.a,null,r.a.createElement(u.a,null,r.a.createElement(o.a,{pb:"120px"},r.a.createElement(i.a,{align:"center",variant:"h2"},"MK Metal Archive"),r.a.createElement(F.a,{exact:!0,path:L,component:G}),r.a.createElement(F.a,{exact:!0,path:M,component:de}),r.a.createElement(F.a,{exact:!0,path:R,component:oe})),r.a.createElement(xe,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var we=a(17),je=a(98),ke=a(23),Oe=a(81),Ie=a(57),Ne={bandList:P.reducer,bandPage:ie.reducer,albumPage:K.reducer,player:Q.reducer};function Ae(e){return Object(ke.c)(Object(je.a)({},Ne,{router:Object(Ie.b)(e)}))}var Be=function(e){var n=[].concat(Object($.a)(Object(d.c)()),[Object(Oe.a)(e)]);return Object(d.a)({reducer:Ae(e),middleware:n})},Se=a(168),Ce=a(96),Te=Object(Ce.a)({palette:{type:"dark"}}),De=Object(we.a)({basename:window.location.host}),Fe=Be(De);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(k.a,{store:Fe},r.a.createElement(Ie.a,{history:De},r.a.createElement(Se.a,{theme:Te},r.a.createElement(Pe,null))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[105,1,2]]]);
//# sourceMappingURL=main.911c1e7c.chunk.js.map